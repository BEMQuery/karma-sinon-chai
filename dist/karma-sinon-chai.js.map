{"version":3,"file":"karma-sinon-chai.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["import { relative } from 'path';\n\nfunction pattern( file ) {\n\treturn {\n\t\tpattern: file,\n\t\tincluded: true,\n\t\tserved: true,\n\t\twatched: false\n\t};\n}\n\nfunction endsWith( substr ) {\n\treturn function( str ) {\n\t\treturn str.indexOf( substr ) >= 0 && str.indexOf( substr ) === ( str.length - substr.length );\n\t};\n}\n\nfunction isDuplicate( files, file ) {\n\tlet result = false;\n\n\tfor ( let i = 0; i < files.length; i++ ) {\n\t\tif ( files[ i ] ) {\n\t\t\tconst pattern = files[ i ].pattern;\n\n\t\t\tresult = result || endsWith( relative( __dirname, file ) )( pattern );\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport { pattern };\nexport { endsWith };\nexport { isDuplicate };\n","import { dirname } from 'path';\nimport { join } from 'path';\nimport { resolve } from 'path';\nimport { pattern } from './utils.js';\nimport { isDuplicate } from './utils.js';\n\nfunction framework( files ) {\n\tconst checkDuplicate = isDuplicate.bind( this, files );\n\n\t/* Lolex */\n\tconst lolexPath = `${ dirname( require.resolve( 'lolex/package.json' ) ) }/lolex.js`;\n\n\t/* Sinon */\n\tconst sinonPath = `${ dirname( require.resolve( 'sinon/package.json' ) ) }/pkg/sinon.js`;\n\n\tif ( !checkDuplicate( sinonPath ) ) {\n\t\tfiles.unshift( pattern( lolexPath ) );\n\t\tfiles.unshift( pattern( sinonPath ) );\n\t}\n\n\t/* Chai */\n\tconst chaiPath = `${ dirname( require.resolve( 'chai/package.json' ) ) }/chai.js`;\n\n\tif ( !checkDuplicate( chaiPath ) ) {\n\t\tfiles.unshift( pattern( chaiPath ) );\n\t\tfiles.push( pattern( join( __dirname, '../adapters/chai.js' ) ) );\n\t}\n\n\t/* Sinon-Chai */\n\tconst sinonChaiPath = resolve( require.resolve( 'sinon-chai' ) );\n\n\tif ( !checkDuplicate( sinonChaiPath ) ) {\n\t\tfiles.push( pattern( sinonChaiPath ) );\n\t}\n}\n\nframework.$inject = [ 'config.files' ];\n\nexport default {\n\t'framework:sinon-chai': [\n\t\t'factory',\n\t\tframework\n\t]\n};\n"],"names":["pattern","file","endsWith","substr","str","indexOf","length","isDuplicate","files","result","i","relative","__dirname","framework","checkDuplicate","bind","this","lolexPath","dirname","require","resolve","sinonPath","unshift","chaiPath","push","join","sinonChaiPath","$inject"],"mappings":";aAEA,SAASA,QAASC,kBAEPA,YACC,UACF,WACC,GAIX,SAASC,SAAUC,UACX,SAAUC,UACTA,EAAIC,QAASF,IAAY,GAAKC,EAAIC,QAASF,KAAeC,EAAIE,OAASH,EAAOG,QAIvF,SAASC,YAAaC,EAAOP,OAGtB,IAFFQ,GAAS,EAEHC,EAAI,EAAGA,EAAIF,EAAMF,OAAQI,OAC7BF,EAAOE,GAAM,KACXV,EAAUQ,EAAOE,GAAIV,UAElBS,GAAUP,SAAUS,cAAUC,UAAWX,IAAUD,UAIvDS,ECtBR,SAASI,UAAWL,OACbM,EAAiBP,YAAYQ,KAAMC,KAAMR,GAGzCS,EAAgBC,aAASC,QAAQC,QAAS,mCAG1CC,EAAgBH,aAASC,QAAQC,QAAS,uCAE1CN,EAAgBO,OACfC,QAAStB,QAASiB,MAClBK,QAAStB,QAASqB,SAInBE,EAAeL,aAASC,QAAQC,QAAS,iCAEzCN,EAAgBS,OACfD,QAAStB,QAASuB,MAClBC,KAAMxB,QAASyB,UAAMb,UAAW,8BAIjCc,EAAgBN,aAASD,QAAQC,QAAS,eAE1CN,EAAgBY,MACfF,KAAMxB,QAAS0B,6BAIvBb,UAAUc,SAAY,gBAEtB,mCAEE,UACAd"}