{"version":3,"file":"karma-sinon-chai.js","sources":["../src/utils.js","../src/index.js"],"sourcesContent":["import * as path from 'path';\n\nfunction pattern( file ) {\n\treturn {\n\t\tpattern: file,\n\t\tincluded: true,\n\t\tserved: true,\n\t\twatched: false\n\t};\n}\n\nfunction endsWith( substr ) {\n\treturn function( str ) {\n\t\treturn str.indexOf( substr ) >= 0 && str.indexOf( substr ) === ( str.length - substr.length );\n\t};\n}\n\nfunction isDuplicate( files, file ) {\n\tlet result = false;\n\n\tfor ( let i = 0; i < files.length; i++ ) {\n\t\tif ( files[ i ] ) {\n\t\t\tconst pattern = files[ i ].pattern;\n\n\t\t\tresult = result || endsWith( path.relative( __dirname, file ) )( pattern );\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport { pattern };\nexport { endsWith };\nexport { isDuplicate };\n","import * as path from 'path';\nimport { pattern } from './utils.js';\nimport { endsWith } from './utils.js';\nimport { isDuplicate } from './utils.js';\n\nfunction framework( files ) {\n\tconst checkDuplicate = isDuplicate.bind( this, files );\n\n\t/* Lolex */\n\tconst lolexPath = `${ path.dirname( require.resolve( 'lolex/package.json' ) ) }/lolex.js`;\n\n\t/* Sinon */\n\tconst sinonPath = `${ path.dirname( require.resolve( 'sinon/package.json' ) ) }/pkg/sinon.js`;\n\n\tif ( checkDuplicate( sinonPath ) ) {\n\t\tfiles.unshift( pattern( lolexPath ) );\n\t\tfiles.unshift( pattern( sinonPath ) );\n\t}\n\n\t/* Chai */\n\tconst chaiPath = `${ path.dirname( require.resolve( 'chai/package.json' ) ) }/chai.js`;\n\n\tif ( checkDuplicate( chaiPath ) ) {\n\t\tfiles.unshift( pattern( chaiPath ) );\n\t\tfiles.push( pattern( path.join( __dirname, '../adapters/chai.js' ) ) );\n\t}\n\n\t/* Sinon-Chai */\n\tconst sinonChaiPath = path.resolve( require.resolve( 'sinon-chai' ) );\n\n\tif ( checkDuplicate( sinonChaiPath ) ) {\n\t\tfiles.push( pattern( sinonChaiPath ) );\n\t}\n}\n\nframework.$inject = [ 'config.files' ];\n\nexport default {\n\t'framework:sinon-chai': [\n\t\t'factory',\n\t\tframework\n\t]\n};\n"],"names":["pattern","file","endsWith","substr","str","indexOf","length","isDuplicate","files","result","i","path","__dirname","framework","checkDuplicate","bind","this","lolexPath","require","resolve","sinonPath","unshift","chaiPath","push","sinonChaiPath","$inject"],"mappings":";aAEA,SAASA,QAASC,kBAEPA,YACC,UACF,WACC,GAIX,SAASC,SAAUC,UACX,SAAUC,UACTA,EAAIC,QAASF,IAAY,GAAKC,EAAIC,QAASF,KAAeC,EAAIE,OAASH,EAAOG,QAIvF,SAASC,YAAaC,EAAOP,OAGtB,IAFFQ,GAAS,EAEHC,EAAI,EAAGA,EAAIF,EAAMF,OAAQI,OAC7BF,EAAOE,GAAM,KACXV,EAAUQ,EAAOE,GAAIV,UAElBS,GAAUP,SAAUS,cAAeC,UAAWX,IAAUD,UAI5DS,ECvBR,SAASI,UAAWL,OACbM,EAAiBP,YAAYQ,KAAMC,KAAMR,GAGzCS,EAAgBN,aAAcO,QAAQC,QAAS,mCAG/CC,EAAgBT,aAAcO,QAAQC,QAAS,uCAEhDL,EAAgBM,OACdC,QAASrB,QAASiB,MAClBI,QAASrB,QAASoB,SAInBE,EAAeX,aAAcO,QAAQC,QAAS,iCAE/CL,EAAgBQ,OACdD,QAASrB,QAASsB,MAClBC,KAAMvB,QAASW,UAAWC,UAAW,8BAItCY,EAAgBb,aAAcO,QAAQC,QAAS,eAEhDL,EAAgBU,MACdD,KAAMvB,QAASwB,6BAIvBX,UAAUY,SAAY,gBAEtB,mCAEE,UACAZ"}